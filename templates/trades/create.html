{% extends "base.html" %}
{% load static %}

{% block extra_css %}
<style>
  /* Scoped to this page only */
  .trade-new-scope .panel {
    background: var(--panel); border:1px solid var(--border); border-radius:12px; padding:1rem;
  }
  .trade-new-scope .hint { color: var(--muted); margin: 0 0 .75rem; }
  .trade-new-scope form { display:grid; gap:1rem; }
  .trade-new-scope .grid {
    display:grid; gap:1rem;
    grid-template-columns: 1fr;
  }
  @media (min-width: 800px) {
    .trade-new-scope .grid { grid-template-columns: repeat(2, 1fr); }
    .trade-new-scope .grid .full { grid-column: 1 / -1; }
  }

  /* Field styling */
  .trade-new-scope .field { display:flex; flex-direction:column; gap:.35rem; }
  .trade-new-scope .field label { color: var(--muted); font-weight:600; }
  .trade-new-scope input[type="text"],
  .trade-new-scope input[type="number"],
  .trade-new-scope input[type="datetime-local"],
  .trade-new-scope select,
  .trade-new-scope textarea {
    background:#0f1520; color:var(--text); border:1px solid var(--border);
    border-radius:10px; padding:.55rem .65rem;
  }
  .trade-new-scope textarea { min-height: 110px; resize: vertical; }

  /* Errors */
  .trade-new-scope .nonfield-errors,
  .trade-new-scope .field .errors {
    padding:.6rem .8rem; border-radius:10px; border:1px solid #7a1f28; background:#2a1518; color:#f8d7da;
  }
  .trade-new-scope .field .help { color: var(--muted); font-size:.92rem; }

  /* Actions */
  .trade-new-scope .actions { display:flex; gap:.5rem; flex-wrap:wrap; align-items:center; }
</style>
{% endblock %}

{% block content %}
<div class="trade-new-scope">
  <h2 style="margin:0 0 .25rem;">New Trade</h2>
  <p class="hint">Log a new trade. You can edit or add an exit later.</p>

  <div class="panel">
    {% if form.non_field_errors %}
      <div class="nonfield-errors">
        {{ form.non_field_errors }}
      </div>
    {% endif %}

    <form method="post" novalidate>
      {% csrf_token %}

      <!-- Render fields in a responsive grid -->
      <div class="grid">
        {% for field in form %}
          <div class="field {% if field.name in 'notes' %}full{% endif %}">
            <label for="{{ field.id_for_label }}">{{ field.label }}</label>
            {{ field }}
            {% if field.help_text %}
              <div class="help">{{ field.help_text|safe }}</div>
            {% endif %}
            {% if field.errors %}
              <div class="errors">{{ field.errors }}</div>
            {% endif %}
          </div>
        {% endfor %}
      </div>

      <div class="actions">
        <button class="btn btn-primary" type="submit">Save</button>
        <a class="btn" href="{% url 'trades_list' %}">Cancel</a>
        <span style="flex:1;"></span>
        <a class="btn" href="{% url 'trades_charts' %}">Charts</a>
      </div>
    </form>
  </div>
</div>
{% endblock %}
