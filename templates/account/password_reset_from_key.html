{% extends "base.html" %}
{% load i18n %}

{% block content %}
  <div class="auth-viewport">
    <div class="auth-card auth-card--square">
      {% if token_fail %}
        <h1 class="auth-title">{% trans "Invalid or expired link" %}</h1>
        <p class="subtle">{% trans "The password reset link is invalid or has expired." %}</p>
        <div class="auth-actions">
          <a class="btn btn-primary" href="{% url 'account_reset_password' %}">{% trans "Request a new link" %}</a>
        </div>
      {% else %}
        <h1 class="auth-title">{% trans "Choose a new password" %}</h1>
        <p class="subtle">{% trans "Enter your new password below." %}</p>

        {% if form.non_field_errors %}<div class="errors">{{ form.non_field_errors }}</div>{% endif %}

        <form method="post" action="." class="auth-form" novalidate>
          {% csrf_token %}

          <div class="field">
            <label for="{{ form.password1.id_for_label }}">{% trans "New password" %}</label>
            {{ form.password1 }}
            {% if form.password1.errors %}<div class="field-error">{{ form.password1.errors }}</div>{% endif %}
          </div>

          <div class="field">
            <label for="{{ form.password2.id_for_label }}">{% trans "Confirm new password" %}</label>
            {{ form.password2 }}
            {% if form.password2.errors %}<div class="field-error">{{ form.password2.errors }}</div>{% endif %}
          </div>

          {% if form.password1.help_text %}
            <div class="subtle" style="margin:.25rem 0 .5rem;">{{ form.password1.help_text|safe }}</div>
          {% endif %}

          <div class="auth-actions">
            <a class="btn btn-light" href="{% url 'account_login' %}">{% trans "Cancel" %}</a>
            <button class="btn btn-primary" type="submit">{% trans "Set new password" %}</button>
          </div>
        </form>
      {% endif %}
    </div>
  </div>
{% endblock %}
